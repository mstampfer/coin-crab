# iOS App with Rust Backend

This project demonstrates how to create an iOS app that uses Rust for implementation code. The app displays "Hello, Rust World!" message generated by a Rust library.

## Project Structure

```
rust-app/
├── Cargo.toml              # Rust project configuration
├── src/lib.rs              # Rust library with FFI functions
├── rust_ios_lib.h          # C header file for Swift interop
├── build_ios.sh            # Script to build Rust library for iOS
├── ios_app/                # iOS Xcode project
│   ├── RustHelloApp.xcodeproj/
│   └── RustHelloApp/
│       ├── RustHelloAppApp.swift
│       ├── ContentView.swift
│       ├── RustHelloApp-Bridging-Header.h
│       └── Assets.xcassets/
└── target/                 # Build artifacts
    └── universal/release/  # Universal iOS libraries
```

## Building and Running

### Prerequisites

- macOS with Xcode installed
- Rust toolchain installed (`curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh`)
- iOS development setup

### Steps

1. **Build the Rust library:**
   ```bash
   ./build_ios.sh
   ```
   
   This script will:
   - Install required iOS targets for Rust
   - Build the library for iOS device (ARM64)
   - Build the library for iOS simulator (x86_64 and ARM64)
   - Create universal libraries

2. **Open the iOS project:**
   ```bash
   open ios_app/RustHelloApp.xcodeproj
   ```

3. **Build and run the iOS app:**
   - Select a simulator or device
   - Press Cmd+R to build and run

## How It Works

1. **Rust Library (`src/lib.rs`):**
   - Contains `hello_rust_world()` function that returns "Hello, Rust World!"
   - Uses FFI (Foreign Function Interface) to expose C-compatible functions
   - Includes proper memory management with `free_string()` function

2. **C Header (`rust_ios_lib.h`):**
   - Defines the C interface for the Rust functions
   - Used by Swift through the bridging header

3. **Swift Integration:**
   - `RustHelloApp-Bridging-Header.h` imports the C header
   - `ContentView.swift` calls the Rust functions directly
   - Displays the message in a SwiftUI interface

4. **Build Process:**
   - Rust code is compiled to static libraries for different iOS architectures
   - Libraries are linked into the iOS app during Xcode build process

## Key Features

- ✅ Rust function returning string to iOS
- ✅ Proper memory management between Rust and Swift
- ✅ SwiftUI interface displaying Rust-generated content
- ✅ Support for both iOS device and simulator
- ✅ Universal library build for multiple architectures

## Troubleshooting

- If you get linker errors, make sure the Rust library was built successfully
- Ensure iOS targets are installed: `rustup target list --installed`
- Check that the library search paths in Xcode project are correct
- Verify the bridging header is properly configured